# ğŸš— EV Service Center Backend

TÃ i liá»‡u hÆ°á»›ng dáº«n cÃ i Ä‘áº·t, cáº¥u hÃ¬nh vÃ  khá»Ÿi cháº¡y há»‡ thá»‘ng **Trung tÃ¢m Dá»‹ch vá»¥ Xe Ä‘iá»‡n (EV Service Center)** â€” Backend API.

---

## ğŸ§© 1. YÃªu cáº§u MÃ´i trÆ°á»ng (Prerequisites)

TrÆ°á»›c khi báº¯t Ä‘áº§u, hÃ£y Ä‘áº£m báº£o mÃ¡y cá»§a báº¡n Ä‘Ã£ cÃ i Ä‘áº·t cÃ¡c pháº§n má»m sau:

- **Node.js**: PhiÃªn báº£n **v18.x** hoáº·c má»›i hÆ¡n  
- **pnpm**: TrÃ¬nh quáº£n lÃ½ gÃ³i thay tháº¿ npm  
  ğŸ‘‰ CÃ i Ä‘áº·t báº±ng lá»‡nh:
  ```bash
  npm install -g pnpm
  ```
- **PostgreSQL**: Cáº§n cÃ³ **má»™t server PostgreSQL** Ä‘ang hoáº¡t Ä‘á»™ng

---

## âš™ï¸ 2. CÃ¡c bÆ°á»›c CÃ i Ä‘áº·t

### ğŸªœ BÆ°á»›c 2.1: Táº£i mÃ£ nguá»“n

Clone repository hoáº·c táº£i mÃ£ nguá»“n vá» mÃ¡y:

```bash
git clone <your-repository-url>
cd SWP391_EV_Maitenance_service_BackEnd
```

### ğŸ“¦ BÆ°á»›c 2.2: CÃ i Ä‘áº·t Dependencies

CÃ i Ä‘áº·t táº¥t cáº£ thÆ° viá»‡n cáº§n thiáº¿t:

```bash
pnpm install
```

---

## ğŸ” 3. Cáº¥u hÃ¬nh MÃ´i trÆ°á»ng (.env)

Táº¡o file tÃªn lÃ  `.env` trong thÆ° má»¥c gá»‘c cá»§a dá»± Ã¡n vÃ  thÃªm cÃ¡c giÃ¡ trá»‹ cáº¥u hÃ¬nh theo máº«u sau:

```bash
# 1. Cáº¥u hÃ¬nh CSDL PostgreSQL
DATABASE_URL="postgresql://postgres:mysecretpassword@localhost:5432/ev_service_db?schema=public"

# 2. JSON Web Token (JWT)
JWT_SECRET="your_super_secret_jwt_key"

# 3. Google OAuth 2.0 (Passport)
GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# 4. Express Session
SESSION_SECRET="your_super_secret_session_key"

# 5. Nodemailer (QuÃªn máº­t kháº©u)
EMAIL_USER="your-email@gmail.com"
EMAIL_PASS="your-gmail-app-password"
```

> ğŸ’¡ **LÆ°u Ã½:**  
> Äá»‘i vá»›i Google OAuth, báº¡n cáº§n Ä‘Äƒng kÃ½ URL sau trong pháº§n â€œAuthorized redirect URIsâ€ trÃªn [Google Cloud Console](https://console.cloud.google.com/):  
> ```
> http://localhost:5000/api/auth/google/callback
> ```

---

## ğŸ—„ï¸ 4. Thiáº¿t láº­p CÆ¡ sá»Ÿ Dá»¯ liá»‡u

Äá»ƒ Prisma táº¡o vÃ  Ã¡p dá»¥ng migration, hÃ£y cháº¡y:

```bash
pnpm prisma migrate dev
```

Lá»‡nh nÃ y sáº½ Ä‘á»“ng bá»™ schema trong Prisma vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u PostgreSQL cá»§a báº¡n.

---

## ğŸ“˜ 5. Thiáº¿t láº­p Swagger (TÃ i liá»‡u & Kiá»ƒm thá»­ API)

### âš™ï¸ BÆ°á»›c 5.1: CÃ i Ä‘áº·t thÆ° viá»‡n

Náº¿u chÆ°a cÃ³, cÃ i Ä‘áº·t thÃªm Swagger UI:

```bash
pnpm add swagger-ui-express yamljs
```

### ğŸš€ BÆ°á»›c 5.2: Cháº¡y á»¨ng dá»¥ng

Khá»Ÿi Ä‘á»™ng server á»Ÿ cháº¿ Ä‘á»™ phÃ¡t triá»ƒn:

```bash
pnpm run dev
```

Server sáº½ cháº¡y táº¡i Ä‘á»‹a chá»‰:

```
http://localhost:6969
```

### ğŸŒ BÆ°á»›c 5.3: Truy cáº­p Swagger UI

Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p:

```
http://localhost:6969/api-docs
```

> Dá»± Ã¡n Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘á»ƒ tá»± Ä‘á»™ng táº£i tÃ i liá»‡u tá»« file `swagger.yaml` táº¡i thÆ° má»¥c gá»‘c.

---

## ğŸ§® 6. (TÃ¹y chá»n) Táº¡o Dá»¯ liá»‡u Máº«u

Náº¿u báº¡n muá»‘n khá»Ÿi táº¡o dá»¯ liá»‡u máº«u Ä‘á»ƒ kiá»ƒm thá»­:

```bash
pnpm db:seed
```

Náº¿u báº¡n muá»‘n dá»n sáº¡ch dá»¯ liá»‡u máº«u Ä‘:

```bash
pnpm prisma migrate reset
```

---

## âœ… HoÃ n táº¥t

Náº¿u báº¡n Ä‘Ã£ lÃ m Ä‘Ãºng cÃ¡c bÆ°á»›c trÃªn, backend cá»§a báº¡n Ä‘Ã£ sáºµn sÃ ng hoáº¡t Ä‘á»™ng ğŸ‰  
Báº¡n cÃ³ thá»ƒ káº¿t ná»‘i frontend hoáº·c Postman Ä‘á»ƒ thá»­ cÃ¡c API Ä‘Æ°á»£c mÃ´ táº£ trong Swagger.

---

### ğŸ§  Gá»£i Ã½ thÃªm
- Kiá»ƒm tra láº¡i káº¿t ná»‘i DB náº¿u Prisma bÃ¡o lá»—i.
- Kiá»ƒm tra biáº¿n mÃ´i trÆ°á»ng `.env` Ä‘Æ°á»£c Ä‘á»‹nh dáº¡ng Ä‘Ãºng.
- DÃ¹ng `pnpm build` náº¿u cáº§n build cho mÃ´i trÆ°á»ng production.

---

**Â© EV Service Center Project â€” 2025**
